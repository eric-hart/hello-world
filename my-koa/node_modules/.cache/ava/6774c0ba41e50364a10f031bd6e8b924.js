"use strict";

var _nodeFetch = _interopRequireDefault(require("node-fetch"));

var _child_process = _interopRequireDefault(require("child_process"));

var _ava = _interopRequireDefault(require("ava"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_ava.default.beforeEach(async test => {
  const devCommand = _child_process.default.spawn('yarn', ['run', 'dev']);

  const execPromise = new Promise((resolve, reject) => {
    devCommand.stdout.on('data', data => {
      resolve(data);
    });
    devCommand.stderr.on('data', data => {
      reject(data);
    });
  });
  await execPromise;
});

(0, _ava.default)('PATH:/greeting should get ', async test => {
  const responsePromise = (0, _nodeFetch.default)('http://localhost:3000/greeting');
  const response = await responsePromise;
  const jsonPromise = response.json();
  console.log('+++++');
  console.log(jsonPromise);
  console.log('+++++');
  const json = await jsonPromise;
  console.log('+++++');
  console.log(json);
  console.log('+++++');
});
//# sourceMappingURL=/Users/crux/Templates/my-koa/node_modules/.cache/ava/6774c0ba41e50364a10f031bd6e8b924.js.map