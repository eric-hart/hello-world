{"version":3,"sources":["test/route/greeting/index.js"],"names":["test","beforeEach","devCommand","process","spawn","execPromise","Promise","resolve","reject","stdout","on","data","stderr","console","log","responsePromise","response","textPromise","text","deepEqual"],"mappings":";;AAAA;;AAEA;;AAEA;;;;AAEAA,IAAI,CAACC,UAAL,CAAgB,MAAOD,IAAP,IAAgB;AAC9B,QAAME,UAAU,GAAGC,uBAAQC,KAAR,CAAc,MAAd,EAAsB,CAAC,KAAD,EAAQ,KAAR,CAAtB,CAAnB;;AAEA,QAAMC,WAAW,GAAG,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACnDN,IAAAA,UAAU,CAACO,MAAX,CAAkBC,EAAlB,CAAqB,MAArB,EAA8BC,IAAD,IAAU;AACrCJ,MAAAA,OAAO,CAACI,IAAD,CAAP;AACD,KAFD;AAGAT,IAAAA,UAAU,CAACU,MAAX,CAAkBF,EAAlB,CAAqB,MAArB,EAA8BC,IAAD,IAAU;AACrCH,MAAAA,MAAM,CAACG,IAAD,CAAN;AACD,KAFD;AAGD,GAPmB,CAApB;AASA,QAAMN,WAAN;AACD,CAbD;AAeAL,IAAI,CAAC,oCAAD,EAAuC,MAAOA,IAAP,IAAgB;AACzDa,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYd,IAAZ;AACAa,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA,QAAMC,eAAe,GAAG,wBAAM,gCAAN,CAAxB;AACA,QAAMC,QAAQ,GAAG,MAAMD,eAAvB;AAEA,QAAME,WAAW,GAAGD,QAAQ,CAACE,IAAT,EAApB;AACA,QAAMA,IAAI,GAAG,MAAMD,WAAnB;AAEAjB,EAAAA,IAAI,CAACmB,SAAL,CAAeD,IAAf,EAAqB,4BAArB;AACD,CAXG,CAAJ","sourceRoot":"/Users/crux/Templates/my-koa","sourcesContent":["import fetch from 'node-fetch';\n\nimport process from 'child_process';\n\nimport assert from 'assert';\n\ntest.beforeEach(async (test) => {\n  const devCommand = process.spawn('yarn', ['run', 'dev']);\n\n  const execPromise = new Promise((resolve, reject) => {\n    devCommand.stdout.on('data', (data) => {\n      resolve(data);\n    });\n    devCommand.stderr.on('data', (data) => {\n      reject(data);\n    });\n  });\n\n  await execPromise;\n});\n\ntest('[TEST] path: \\\"/greeting\\\" output;', async (test) => {\n  console.log('+++++++++++');\n  console.log(test);\n  console.log('+++++++++++');\n  const responsePromise = fetch('http://localhost:3000/greeting');\n  const response = await responsePromise;\n\n  const textPromise = response.text();\n  const text = await textPromise;\n\n  test.deepEqual(text, '{\"content\":\"Hello World!\"}');\n});\n"]}